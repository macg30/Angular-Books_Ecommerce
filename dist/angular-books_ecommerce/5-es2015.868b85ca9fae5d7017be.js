(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0EKl":function(t,e,a){"use strict";a.r(e),a.d(e,"CatalogueModule",(function(){return K}));var o=a("ofXK"),n=a("tyNb"),i=a("3Pt+"),r=a("fXoL"),c=a("kxps"),b=a("/t3+"),s=a("bTqV"),l=a("NFeN"),u=a("kmnG"),d=a("qFsG");let p=(()=>{class t{constructor(t,e,a,o){this.formBuilder=t,this.bookManagament=e,this.route=a,this.router=o}ngOnInit(){const t=this.route.snapshot.paramMap.get("isbn");this.parameter=this.bookManagament.readBook(t),this.parameter?(this.new=!1,this.action="Modificar"):(this.new=!0,this.action="A\xf1adir"),this.buildForm()}buildForm(){let t,e,a,o;this.new?(t="",e="",a="",o=0):(t=this.parameter.title,e=this.parameter.abstract,a=this.parameter.isbn,o=this.parameter.price),this.formGroup=this.formBuilder.group({title:[t,[i.m.required]],abstract:[e,[i.m.required]],isbn:[a,[i.m.required,i.m.minLength(10)]],price:[o,[i.m.required,this.validatePrice]]})}validatePrice(t){console.log("Se esta validando el precio")}getError(t){let e="";const a=this.formGroup.get(t);return a.touched&&null!=a.errors&&(e=JSON.stringify(a.errors)),e}onSubmit(){const t={title:this.formGroup.get("title").value,abstract:this.formGroup.get("abstract").value,isbn:this.formGroup.get("isbn").value,price:this.formGroup.get("price").value};this.new?(this.bookManagament.addbook(t),console.log("Se a\xf1ade un nuevo libro")):(this.bookManagament.modifyBook(this.parameter.isbn,t),console.log("Se modifica un libro existente")),this.router.navigate(["/catalogue"])}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(i.b),r.Lb(c.a),r.Lb(n.a),r.Lb(n.b))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-add-modify"]],decls:32,vars:4,consts:[["color","primary"],[1,"toolbar"],["routerLink","/catalogue"],["mat-raised-button","","focusable","false"],[3,"formGroup","ngSubmit"],["matInput","","type","text","formControlName","title","placeholder","Angular 10"],["matInput","","type","text","formControlName","abstract","placeholder","Libro para desarrolladores sin experiencia en Angular..."],["matInput","","type","text","formControlName","isbn","placeholder","1985170280"],["matInput","","type","number","formControlName","price","placeholder","50.90"],["mat-raised-button","","focusable","false",3,"disabled"]],template:function(t,e){1&t&&(r.Rb(0,"section"),r.Rb(1,"header"),r.Rb(2,"mat-toolbar",0),r.Rb(3,"mat-toolbar-row"),r.Rb(4,"span"),r.vc(5),r.Qb(),r.Mb(6,"span",1),r.Rb(7,"a",2),r.Rb(8,"button",3),r.Rb(9,"mat-icon"),r.vc(10,"reply"),r.Qb(),r.Rb(11,"span"),r.vc(12,"Volver"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(13,"form",4),r.Yb("ngSubmit",(function(){return e.onSubmit()})),r.Rb(14,"mat-form-field"),r.Rb(15,"mat-label"),r.vc(16,"T\xedtulo"),r.Qb(),r.Mb(17,"input",5),r.Qb(),r.Rb(18,"mat-form-field"),r.Rb(19,"mat-label"),r.vc(20,"Resumen"),r.Qb(),r.Mb(21,"input",6),r.Qb(),r.Rb(22,"mat-form-field"),r.Rb(23,"mat-label"),r.vc(24,"ISBN"),r.Qb(),r.Mb(25,"input",7),r.Qb(),r.Rb(26,"mat-form-field"),r.Rb(27,"mat-label"),r.vc(28,"Precio"),r.Qb(),r.Mb(29,"input",8),r.Qb(),r.Rb(30,"button",9),r.vc(31),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(5),r.xc("",e.action," libro"),r.Ab(8),r.ic("formGroup",e.formGroup),r.Ab(17),r.ic("disabled",e.formGroup.invalid),r.Ab(1),r.wc(e.action))},directives:[b.a,b.c,n.c,s.a,l.a,i.n,i.h,i.d,u.b,u.e,d.a,i.a,i.g,i.c,i.k],styles:["form[_ngcontent-%COMP%]{margin:0 20px;border:1pt solid #000;border-radius:10px;background:#69f0ae;display:flex;flex-direction:column}.toolbar[_ngcontent-%COMP%]{flex:1 1 auto}mat-form-field[_ngcontent-%COMP%]{padding:10px 40px}section[_ngcontent-%COMP%]{background:#000;padding-bottom:10px}input[_ngcontent-%COMP%]{color:#000}header[_ngcontent-%COMP%]{margin-bottom:10px}mat-label[_ngcontent-%COMP%]{color:#000}"]}),t})();var m=a("+0xr"),h=a("M9IT"),f=a("8LU1"),g=a("FKr1"),R=(a("FtGj"),a("XNiG"));a("VRyK"),a("R0Ic"),a("u47x");class v{}const Q=Object(g.r)(Object(g.p)(v));let C=(()=>{class t extends Q{constructor(){super(...arguments),this.sortables=new Map,this._stateChanges=new R.a,this.start="asc",this._direction="",this.sortChange=new r.o}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Object(f.c)(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let e=function(t,e){let a=["asc","desc"];return"desc"==t&&a.reverse(),e||a.push(""),a}(t.start||this.start,null!=t.disableClear?t.disableClear:this.disableClear),a=e.indexOf(this.direction)+1;return a>=e.length&&(a=0),e[a]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return y(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[r.xb,r.yb]}),t})();const y=r.Tb(C);var M=a("d3UM"),k=a("lJxs"),x=a("UXun"),w=a("tk/3");let O=(()=>{class t{constructor(t){this.httpClient=t,this.ratesApi="https://api.exchangeratesapi.io/latest?symbols=",this.rate=1}transform(t,e){return e?this.getCotizacionesOnline$(e).pipe(Object(k.a)(e=>t*e)):(console.log("Se mantiene la moneda"),t)}getCotizacionesOnline$(t){const e=this.ratesApi+t;return console.log("Se hace una conversion a "+t),this.httpClient.get(e).pipe(Object(x.a)(1),Object(k.a)(e=>e.rates[t]))}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(w.a))},t.\u0275pipe=r.Kb({name:"exRate",type:t,pure:!0}),t})();function S(t,e){if(1&t&&(r.Rb(0,"mat-option",22),r.vc(1),r.Qb()),2&t){const t=e.$implicit;r.ic("value",t),r.Ab(1),r.xc(" ",t," ")}}function A(t,e){1&t&&(r.Rb(0,"th",23),r.vc(1," ISBN "),r.Qb())}function P(t,e){if(1&t&&(r.Rb(0,"td",24),r.vc(1),r.Qb()),2&t){const t=e.$implicit;r.Ab(1),r.xc(" ",t.isbn," ")}}function _(t,e){1&t&&(r.Rb(0,"th",23),r.vc(1," T\xedtulo "),r.Qb())}function I(t,e){if(1&t&&(r.Rb(0,"td",24),r.vc(1),r.Qb()),2&t){const t=e.$implicit;r.Ab(1),r.xc(" ",t.title," ")}}function L(t,e){1&t&&(r.Rb(0,"th",23),r.vc(1,"Precio"),r.Qb())}function D(t,e){if(1&t&&(r.Rb(0,"span"),r.vc(1),r.dc(2,"number"),r.Qb()),2&t){const t=r.cc().$implicit,e=r.cc();r.Ab(1),r.yc(" ",r.fc(2,2,t.price,"1.0-0")," ",e.selectedType," ")}}function B(t,e){if(1&t&&(r.Rb(0,"span"),r.vc(1),r.dc(2,"number"),r.dc(3,"async"),r.dc(4,"exRate"),r.Qb()),2&t){const t=r.cc().$implicit,e=r.cc();r.Ab(1),r.yc(" ",r.fc(2,2,r.ec(3,5,r.fc(4,7,t.price,e.selectedType)),"1.0-0")," ",e.selectedType," ")}}function T(t,e){if(1&t&&(r.Rb(0,"td",24),r.uc(1,D,3,5,"span",25),r.uc(2,B,5,10,"span",25),r.Qb()),2&t){const t=r.cc();r.Ab(1),r.ic("ngIf","EUR"===t.selectedType),r.Ab(1),r.ic("ngIf","EUR"!==t.selectedType)}}function G(t,e){1&t&&(r.Rb(0,"th",23),r.vc(1," Acciones"),r.Qb())}function F(t,e){if(1&t){const t=r.Sb();r.Rb(0,"td",24),r.Rb(1,"div",26),r.Rb(2,"a",27),r.Rb(3,"button",28),r.Rb(4,"mat-icon"),r.vc(5,"visibility"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"a",27),r.Rb(7,"button",29),r.Rb(8,"mat-icon"),r.vc(9,"edit"),r.Qb(),r.Qb(),r.Qb(),r.Rb(10,"button",30),r.Yb("click",(function(){r.oc(t);const a=e.$implicit;return r.cc().deleteBook(a.isbn)})),r.Rb(11,"mat-icon"),r.vc(12,"delete"),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&t){const t=e.$implicit;r.Ab(2),r.jc("routerLink","detail/",t.isbn,""),r.Ab(4),r.jc("routerLink","modify/",t.isbn,"")}}function N(t,e){1&t&&r.Mb(0,"tr",31)}function j(t,e){1&t&&r.Mb(0,"tr",32)}const z=function(){return[5,10,25]};let U=(()=>{class t{constructor(t){this.bookManagament=t,this.header=["isbn","title","price","actions"],this.refreshBookList()}ngOnInit(){this.moneyType=["EUR","USD","GBP"],this.selectedType="EUR",this.dataSource.filterPredicate=(t,e)=>(console.log(t.isbn),t.isbn==e)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){const e=t.target.value;console.log(e),this.dataSource.filter=e.toString(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}deleteBook(t){this.bookManagament.deleteBook(t),this.refreshBookList()}refreshBookList(){this.booklist=this.bookManagament.readBookList(),this.dataSource=new m.k(this.booklist)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(c.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-catalogue"]],viewQuery:function(t,e){var a;1&t&&(r.zc(h.a,!0),r.zc(C,!0)),2&t&&(r.lc(a=r.Zb())&&(e.paginator=a.first),r.lc(a=r.Zb())&&(e.sort=a.first))},decls:41,vars:7,consts:[["color","primary"],[1,"toolbarRow1"],[1,"catalogue"],[1,"selectTypeMoney"],["appearance","fill",1,"selectType"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["routerLink","add"],["mat-raised-button","","focusable","false"],["matInput","","placeholder","Ejemplo: 1985170280",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","isbn"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","price"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],[3,"value"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],[1,"actionButtons"],[3,"routerLink"],["mat-stroked-button","","color","primary","focusable","false"],["mat-stroked-button","","color","accent","focusable","false"],["mat-stroked-button","","color","warn","focusable","false",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(r.Rb(0,"mat-toolbar",0),r.Rb(1,"mat-toolbar-row",1),r.Rb(2,"span"),r.vc(3,"Cat\xe1logo de libros"),r.Qb(),r.Mb(4,"span",2),r.Rb(5,"div",3),r.Rb(6,"mat-form-field",4),r.Rb(7,"mat-label"),r.vc(8,"Moneda actual:"),r.Qb(),r.Rb(9,"mat-select",5),r.Yb("ngModelChange",(function(t){return e.selectedType=t})),r.uc(10,S,2,2,"mat-option",6),r.Qb(),r.Qb(),r.Qb(),r.Mb(11,"span",2),r.Rb(12,"a",7),r.Rb(13,"button",8),r.Rb(14,"mat-icon"),r.vc(15,"add"),r.Qb(),r.Rb(16,"span"),r.vc(17,"A\xf1adir nuevo libro"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(18,"mat-toolbar-row"),r.Rb(19,"mat-form-field"),r.Rb(20,"mat-label"),r.vc(21,"Filtrar por: ISBN"),r.Qb(),r.Rb(22,"input",9,10),r.Yb("keyup",(function(t){return e.applyFilter(t)})),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(24,"div",11),r.Rb(25,"table",12),r.Pb(26,13),r.uc(27,A,2,0,"th",14),r.uc(28,P,2,1,"td",15),r.Ob(),r.Pb(29,16),r.uc(30,_,2,0,"th",14),r.uc(31,I,2,1,"td",15),r.Ob(),r.Pb(32,17),r.uc(33,L,2,0,"th",14),r.uc(34,T,3,2,"td",15),r.Ob(),r.Pb(35,18),r.uc(36,G,2,0,"th",14),r.uc(37,F,13,2,"td",15),r.Ob(),r.uc(38,N,1,0,"tr",19),r.uc(39,j,1,0,"tr",20),r.Qb(),r.Mb(40,"mat-paginator",21),r.Qb()),2&t&&(r.Ab(9),r.ic("ngModel",e.selectedType),r.Ab(1),r.ic("ngForOf",e.moneyType),r.Ab(15),r.ic("dataSource",e.dataSource),r.Ab(13),r.ic("matHeaderRowDef",e.header),r.Ab(1),r.ic("matRowDefColumns",e.header),r.Ab(1),r.ic("pageSizeOptions",r.kc(6,z)))},directives:[b.a,b.c,u.b,u.e,M.a,i.g,i.j,o.k,n.c,s.a,l.a,d.a,m.j,m.c,m.e,m.b,m.g,m.i,h.a,g.h,m.d,m.a,o.l,m.f,m.h],pipes:[o.e,o.b,O],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}.catalogue[_ngcontent-%COMP%]{flex:1 1 auto}.headertoolbar[_ngcontent-%COMP%]{box-shadow:10px 5px 5px #000}mat-toolbar[_ngcontent-%COMP%]{padding-top:10px}"]}),t})();var $=a("Wp6s");const E=[{path:"",component:U},{path:"add",component:p},{path:"modify/:isbn",component:p},{path:"detail/:isbn",component:(()=>{class t{constructor(t,e){this.bookManagament=t,this.route=e}ngOnInit(){const t=this.route.snapshot.paramMap.get("isbn");this.book=this.bookManagament.readBook(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(c.a),r.Lb(n.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-detail"]],decls:35,vars:4,consts:[["color","primary"],[1,"toolbar"],["routerLink","/catalogue"],["mat-raised-button","","focusable","false"],[1,"title"],[1,"booktitle"],[1,"detail"],[1,"card","abstract"],[1,"card"],["mat-button","","color","accent"],["mat-button",""]],template:function(t,e){1&t&&(r.Rb(0,"mat-toolbar",0),r.Rb(1,"mat-toolbar-row"),r.Rb(2,"span"),r.vc(3,"Detalle del libro"),r.Qb(),r.Mb(4,"span",1),r.Rb(5,"a",2),r.Rb(6,"button",3),r.Rb(7,"mat-icon"),r.vc(8,"reply"),r.Qb(),r.Rb(9,"span"),r.vc(10,"Volver"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(11,"mat-toolbar-row"),r.Mb(12,"span",4),r.Rb(13,"span",5),r.vc(14),r.Qb(),r.Qb(),r.Qb(),r.Rb(15,"section",6),r.Rb(16,"mat-card",7),r.Rb(17,"mat-card-content"),r.Rb(18,"p"),r.vc(19),r.Qb(),r.Qb(),r.Qb(),r.Rb(20,"mat-card",8),r.Rb(21,"mat-card-content"),r.Rb(22,"p"),r.vc(23," ISBN: "),r.Qb(),r.Rb(24,"p"),r.vc(25),r.Qb(),r.Rb(26,"p"),r.vc(27," Precio: "),r.Qb(),r.Rb(28,"p"),r.vc(29),r.Qb(),r.Qb(),r.Rb(30,"mat-card-actions"),r.Rb(31,"button",9),r.vc(32,"Comprar"),r.Qb(),r.Rb(33,"button",10),r.vc(34,"Compartir"),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(14),r.wc(e.book.title),r.Ab(5),r.xc(" ",e.book.abstract," "),r.Ab(6),r.xc(" ",e.book.isbn," "),r.Ab(4),r.xc(" ",e.book.price," EUR "))},directives:[b.a,b.c,n.c,s.a,l.a,$.a,$.c,$.b],styles:[".booktitle[_ngcontent-%COMP%]{font-size:20px}.title[_ngcontent-%COMP%]{flex:0.5 1 auto}.toolbar[_ngcontent-%COMP%]{flex:1 1 auto;padding:0 10px}.card[_ngcontent-%COMP%]{max-width:1000px;margin:10px}.abstract[_ngcontent-%COMP%]{width:70%}.detail[_ngcontent-%COMP%]{display:flex;flex-direction:row}.rowToolbar1[_ngcontent-%COMP%]{margin-top:20px}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[n.d.forChild(E)],n.d]}),t})();var J=a("hctd");let K=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[o.c,q,J.a,i.l]]}),t})()}}]);